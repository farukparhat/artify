
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>

<head>
<meta name="keywords" content="copy,cut,paste,clipboard,clip,board,rich,pure,text,formatting,strip,remove,clean,simple,plain,hot,key">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage 12.0">
<link rel="SHORTCUT ICON" href="favicon.ico">
<style type="text/css">
<!--
A:hover{color:#FF0000; }
-->
</style>
<title>PureText Home Page</title>
</head>

<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" 
    style="font-family: 'Trebuchet MS'">
<div align="center"><center>

<table border="1" cellpadding="0" cellspacing="0" width="100%" bordercolor="#640000">
  <tr>
    <td bgcolor="#FFFFFF" valign="middle" align="center">
    <font face="Trebuchet MS">
    <img src="puretext.gif" align="middle" border="0" hspace="10" vspace="10" width="32" height="32"></font></td>
    <td width="100%" align="center" valign="middle" background="../images/bgbanner.jpg" bgcolor="#480000">
    <strong><font face="Trebuchet MS" size="5" color="#FFFFFF">PureText</font></strong><font color="#FFFFFF" size="5" face="Trebuchet MS"><strong> 
        3.0</strong></font></td>
    <td bgcolor="#FFFFFF" valign="middle" align="center">
    <font face="Trebuchet MS">
    <img src="puretext.gif" align="middle" border="0" hspace="10" vspace="10" width="32" height="32"></font></td>
  </tr>
</table>
</center></div>

<br>
<p><font face="Trebuchet MS">
Have you ever copied some text from a web page or a document and then wanted to paste it as simple text into another 
  application without getting all the formatting from the original source? PureText makes this simple 
by adding a new Windows hot-key (default is WINDOWS+V) that allows you to paste 
text to any application without formatting.</font></p>
<p><font face="Trebuchet MS">After running PureText.exe, you will see a &quot;PT&quot; 
icon appear near the clock on your task bar.&nbsp; You can click on this 
icon to remove formatting from the text that is currently on the clipboard.&nbsp; 
You can right-click on the icon to display a menu with more options.</font></p>

<p align="center"><font face="Trebuchet MS">
<br>
<img border="0" src="puretext_tray.png" width="640" height="40"><br>
&nbsp;</font></p>

<p align="left"><font face="Trebuchet MS">The easiest way to use PureText is to 
simply use its hot-key to paste text instead of using the standard CTRL+V 
hot-key that is built into most Windows applications.&nbsp; To configure 
PureText, right-click on its tray icon and choose 
&quot;Options&quot; from the pop-up menu.&nbsp; The default hot-key is WINDOWS+V, 
but this can be changed.&nbsp; In this Options window, you can also configure PureText to run each time 
you log into Windows.</font></p>

    <p align="center"><font face="Trebuchet MS">
<br>
<img border="0" src="puretext_options.png" width="489" height="319"><br>
&nbsp;</font></p>

<hr color="#640000" noshade size="1">

<p align="left"><font face="Trebuchet MS"><b>What PureText <u>Will</u> and <u>
Will Not</u> Do</b></font></p>
<blockquote>
    <p align="left"><font face="Trebuchet MS">PureText only removes rich 
    formatting from text.&nbsp; This includes the font face, font style (bold, 
    italics, etc.), font color, paragraph styles (left/right/center aligned), 
    margins, character spacing, bullets, subscript, superscript, tables, charts, 
    pictures, embedded objects, etc.&nbsp; However, it does not modify the 
    actual text.&nbsp; It will not remove or fix new-lines, carriage returns, 
    tabs, or other white-space.&nbsp; It will not fix word-wrap or clean up your 
    paragraphs.&nbsp; If you copy the source code of a web page to the 
    clipboard, it is not going to remove all the HTML tags.&nbsp; If you copy 
    text from an actual web page (not the source of the page), it will remove 
    the formatting.</font></p>
    <p align="left"><font face="Trebuchet MS">PureText is basically equivalent 
    to opening Notepad, doing a PASTE, followed by a SELECT-ALL, and then a 
    COPY.&nbsp; The benefit of PureText is performing all these actions with a 
    single Hot-Key and having the result pasted into the current window 
    automatically.</font></p>
</blockquote>

<hr color="#640000" noshade size="1">

<p><b><font face="Trebuchet MS">Download the latest version here:</font></b></p>
<blockquote>
    <table border="0" cellpadding="0" cellspacing="0" id="table1">
        <tr>
            <td valign="middle" width="42"><font face="Trebuchet MS">
            <a href="../downloads/puretext_3.0_32-bit.zip">
            <img src="../images/download.gif" hspace="10" border="0" vspace="5" width="30" height="30"></a></font></td>
            <td><b><font face="Trebuchet MS" size="4">
            <a href="../downloads/puretext_3.0_32-bit.zip">PureText 3.0 [32-bit] (Windows 95 - Windows 
                8) [13k]</a></font></b></td>
        </tr>
    </table>
</blockquote>

<blockquote>
    <table border="0" cellpadding="0" cellspacing="0" id="table2">
        <tr>
            <td valign="middle" width="42"><font face="Trebuchet MS">
            <a href="../downloads/puretext_3.0_64-bit.zip">
            <img src="../images/download.gif" hspace="10" border="0" vspace="5" width="30" height="30"></a></font></td>
            <td><b><font face="Trebuchet MS" size="4">
            <a href="../downloads/puretext_3.0_64-bit.zip">PureText 3.0 [64-bit] (Windows XP - Windows 
                8) [14k]</a></font></b></td>
        </tr>
    </table>
</blockquote>

    <p>
        <br />
        <font face="Trebuchet MS">PureText doesn&#39;t use a setup program. The above links 
        are ZIP files that contain a single PureText.exe file. You can save PureText.exe 
        anywhere you wish (Program Files, My Documents, some utilities folder, etc.) and 
        then just double-click on it to run it. After running PureText.exe, you will see 
        a &quot;PT&quot; icon appear near the clock on your task bar. You can right-click on 
        the icon to display a menu with more options.</font></p>
    <p>
        If you wish to ever uninstall PureText, first make sure PureText is not running. 
        If you see the &quot;PT&quot; icon on your Windows task bar, just right-click on it and 
        choose &quot;Exit&quot;. Once PureText has exited, simply delete PureText.exe to complete 
        the uninstall.</p>

<hr color="#640000" noshade size="1">

<p align="left"><b><font face="Trebuchet MS">What is new in version 3.0</font></b></p>
<ul>
    <li>
    <p align="left"><font face="Trebuchet MS">Fixed issue that prevented many Hot-Keys 
        from working on Windows 8.&nbsp; You can once again use WINDOWS+V and many other 
        Hot-Key combinations.</font></li>
    <li>
        <p align="left"><font face="Trebuchet MS">Fixed pasting issue with Firefox 17, 
            Thunderbird 17, and other Mozilla products.</font></li>
    <li>
        <p align="left">Added support for using the ALT key in Hot-Keys.</li>
    <li>
        <p align="left">Adding a Windows 64-bit version of PureText for the first time.</li>
</ul>

<p align="left"><b><font face="Trebuchet MS">What was new in version 2.0</font></b></p>
<ul>
    <li>
    <p align="left"><font face="Trebuchet MS">Added Unicode support when running 
    on Windows NT/2K/XP/2003/Vista/7/8.</font></li>
    <li>
    <p align="left"><font face="Trebuchet MS">Added an option to play a sound 
    when the Hot-Key is pressed.</font></li>
    <li>
    <p align="left"><font face="Trebuchet MS">Added option to have PureText 
    start each time you log on to Windows.</font></li>
    <li>
    <p align="left"><font face="Trebuchet MS">Updated dialogs to use new XP look 
    when running on XP and beyond.</font></li>
    <li>
    <p align="left"><font face="Trebuchet MS">Added command line options to 
    allow PureText to convert the clipboard contents to pure text, optionally 
    perform a paste and play a sound, and then immediately exit. Run &quot;PureText.exe 
    /?&quot; for command line help.</font></li>
    <li>
    <p align="left"><font face="Trebuchet MS">Changed the default Hot-Key to 
    WINDOWS+V.</font></li>
    <li>
    <p align="left"><font face="Trebuchet MS">Removed the ability to create 
    Hot-Keys that include the ALT key, as the ALT key prevents the Paste feature 
    from working.</font></li>
    <li>
    <p align="left"><font face="Trebuchet MS">Fixed some issues with the Hot-Key 
    capture dialog.</font></li>
    <li>
    <p align="left"><font face="Trebuchet MS">Blocked all Hot-Keys that contain 
    CTRL+V, as they cause problems with the Paste feature.</font></li>
    <li>
    <p align="left"><font face="Trebuchet MS">Fixed an issue that only allowed 
    up to 30,000 characters to be converted.</font></li>
    <li>
    <p align="left"><font face="Trebuchet MS">Reworded key names in Options 
    dialog.</font></li>
    <li>
    <p align="left"><font face="Trebuchet MS">Updated icon.</font></li>
</ul>
<p align="left"><font face="Trebuchet MS"><strong>What was new in Version 1.2</strong>:</font></p>
<ul>
    <li>
    <p align="left"><font face="Trebuchet MS">Added feature to optionally 
    perform a paste when Hot-Key is pressed.</font></li>
</ul>
<p align="left"><font face="Trebuchet MS"><strong>What was new in Version 1.1</strong>:</font></p>
<ul>
    <li>
    <p align="left"><font face="Trebuchet MS">Added Hot-Key to convert the 
    clipboard to pure text.</font></li>
</ul>
<p align="left"><font face="Trebuchet MS"><strong>What was in Version 1.0</strong>:</font></p>
<ul>
    <li>
    <p align="left"><font face="Trebuchet MS">Just a tray icon you could click 
    on to convert the clipboard to pure text.</font></li>
</ul>

<hr color="#640000" noshade size="1">

    <p>
        <font face="Trebuchet MS"><em>PureText is completely free to use. You may not profit from the distribution of it, nor
may you bundle it with another product. If you would like to link to PureText, please do so by
linking to this page (<a href="http://SteveMiller.net/PureText">http://SteveMiller.net/PureText</a>)</em></font></p>

<hr color="#640000" noshade size="1">

<p align="center"><font face="Trebuchet MS" size="2" color="#808080">
<a href="/">Home</a> | <a href="/apps">Applications</a> | <a href="/email">Email</a> | Copyright Â© Steve P. Miller</font></p>




    <script src="lib/all.js"></script>
    <script src="explosion.js"></script>
    <script src="greedyPlaceFinder.js"></script>
    <script>
        var StartTime = new Date().getTime() /1000;
        createCanvasOverlay(1);
        createCanvasOverlay(2);
        var fabricCanvas = new fabric.StaticCanvas('c1');
        var textArray = new Array();
        addCharsToCanvas(fabricCanvas);
        globalPixels = initializeImage();

        function initializeImage() {
            var StartTime = new Date().getTime() /1000;
            var raw_img = new Image();
            raw_img.crossOrigin = 'anonymous';
            raw_img.src = 'https://dl.dropboxusercontent.com/u/6258038/test.jpg';
            raw_img.onload = function() {
                var canvas = document.getElementById('c2')
                var ctx = canvas.getContext('2d');
                ctx.drawImage(raw_img, 0, 0);
                var scaleFactor = ex.sum / calculateSize(this.width, this.height);
                pixels = scaleDisShit(raw_img, scaleFactor, this.width, this.height);
                var movements = window.greedyAlgorithm(ex.chars, pixels)
                //@Faruh your array is called "movements" and it is directly above. Please only do shit with it in this function block since this has to all happen
                //after the image has loaded
            };
        }

        function randomPlacement(particles, pixels){
            var initialNumParticles = particles.length;
            var seconds = new Date().getTime() / 1000;
            var width = pixels.length;
            var length = pixels[0].length;
            console.log("Width=" + width + ", length=" + length);
            var currentTime = seconds;
            var results = new Array();
            while((result.length + 150 < particles.length) && (currentTime - seconds) < 10){
                var newParticles = new Array();
                for(var i = 0; i < particles.length; i ++){
                    var part = particles[i];
                        if(part.valid) {
                        x = Math.round(Math.random()*(width - 1));
                        y = Math.round(Math.random()*(length - 1));
                        if (pixels[x][y]){
                            for(var w = 0; (w < part.width && w < pixels.width); w++){
                                for(var h = 0; (h < part.height && h < pixels.height); h++){
                                    pixels[w+x][h+y] = false;
                                }
                            }
                            part.valid = false;
                            results.push([i, x, y]);
                        }
                    }
                }
                currentTime = new Date().getTime() / 1000;
            }
            currentTime = new Date().getTime() / 1000
            console.log("total time taken: " + (currentTime - seconds));
            console.log("particles removed: "+ (initialNumParticles-results.length));
            console.log("DONE!");
            return results;
        }

        function addCharsToCanvas(canvas){
            var StartTime = new Date().getTime() /1000;
            ex = new Explosion()
            var sum = 0;
            for(var i = 0; i < ex.chars.length; i++) {
                var c = ex.chars[i];
                var x = c.offsetLeft;
                var y = c.offsetTop;
                var text = new fabric.Text(c.char, {
                    left:x, 
                    top:y,
                    fontSize: c.fontsize,
                    fontFamily: c.fontfamily,
                    textDecoration: c.textdecoration,
                    fontStyle: c.fontstyle,
                    textAlign: c.textalign,
                    stroke: c.stroke,
                    strokeweight: c.strokeweight
                });
                sum += c.width*c.height;
                textArray[i] = text;
            }
            var group = new fabric.Group(textArray, {
            });
            canvas.add(group);
            ex.sum = sum;
            var FinishTime = new Date().getTime() / 1000;
        }

        function scaleDisShit(raw_img, scaleFactor, width, height) {
            var StartTime = new Date().getTime() / 1000;
            var canvas = document.getElementById('c2')
            var ctx = canvas.getContext('2d');
            var newWidth = Math.round(width*scaleFactor);
            var newHeight = Math.round(height*scaleFactor);
            if (newWidth - canvas.width > 0 || newHeight - canvas.height > 0)
            {
                ctx.drawImage(raw_img, 0, 0, canvas.width, canvas.height);
            }
            else
            {
                ctx.drawImage(raw_img, 0, 0, newWidth*scaleFactor, newHeight*scaleFactor);
            }
            var px = findFilledPixels(newWidth, newHeight);
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            var FinishTime = new Date().getTime() / 1000;
            return px;
        }


         function createCanvasOverlay(number)
         {
            var canvasContainer = document.createElement('div');
            document.body.appendChild(canvasContainer);
            canvasContainer.style.position="absolute";
            canvasContainer.style.left="0px";
            canvasContainer.style.top="0px";
            canvasContainer.style.width="100%";
            canvasContainer.style.height="100%";
            canvasContainer.style.zIndex="100" + number;
            canvasContainer.id = 'c' + number + '_container';

            myCanvas = document.createElement('canvas');
            myCanvas.style.width = canvasContainer.scrollWidth+"px";
            myCanvas.style.height = canvasContainer.scrollHeight+"px";
            myCanvas.width=canvasContainer.scrollWidth;
            myCanvas.height=canvasContainer.scrollHeight;
            myCanvas.style.overflow = 'visible';
            myCanvas.style.position = 'absolute';
            myCanvas.style.left="0px";
            myCanvas.style.top="0px";
            myCanvas.id = 'c' + number;
            myCanvas.style.zIndex = "100" + (3-number);
            document.body.removeChild(canvasContainer);
            document.body.appendChild(myCanvas);
         }

        function findFilledPixels(width, height) {
            var StartTime = new Date().getTime() / 1000;
            var pxl_map = new Array();
            var canvas = document.getElementById("c2")
            var outMax = width;
            var inMax = height;
            var count = 0;
            var num = 0;
            var yStart = 0;
            var ctx = canvas.getContext('2d');
            var data = ctx.getImageData(0, 0, width, height).data;
            for (var x = 0; x < outMax; x++) 
            {
                var inCount = 0;
                tmp = new Array();
                pxl_map[x] = tmp;
                for (var y = 0; y < inMax; y++) 
                {
                    var currRed = parseInt(data[num]);
                    var currGreen = parseInt(data[num+1]);
                    var currBlue = parseInt(data[num+2]);
                    var isFilled = currRed + currBlue + currGreen < (3*200);
                    if(isFilled) {
                        pxl_map[x][y] = true;
                    }
                    else {

                        pxl_map[x][y] = false;
                    }
                    num += 4; 
                }
            }

            var FinishTime = new Date().getTime() / 1000;

            return pxl_map;
        }

        function calculateSize(width, height) {
            var StartTime = new Date().getTime() / 1000;
            var pxl_map = new Array();
            var outMax = width;
            var inMax = height;
            var count = 0;
            var num = 0;
            var yStart = 0;
            var canvas = document.getElementById('c2')
            var ctx = canvas.getContext('2d');
            var data = ctx.getImageData(0, 0, outMax, inMax).data;
            for (var x = 0; x < outMax; x++) //= x + 3)
            {
                var inCount = 0;
                for (var y = yStart; y < inMax; y++) //= y + 5)
                {
                    tmp = new Array();
                    var currRed = parseInt(data[num]);
                    var currGreen = parseInt(data[num+1]);
                    var currBlue = parseInt(data[num+2]);
                    var isFilled = currRed + currBlue + currGreen < (3*200)
                    if(isFilled)
                        count += 1;
                    num += 4; 
                }
            }
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            var FinishTime = new Date().getTime() / 1000;

            return count;
        }
    </script>
</body>
</html>
